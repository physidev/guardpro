<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
		<title>GuardPro</title>
		<link rel="shortcut icon" href="favicon.ico">
		<link href="style.css" rel="stylesheet">
		<link href="emergency.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet"> 
		<script type="text/javascript" src="script.js"></script>
		
		<script>
			function displayNode(n) {
				var question = document.getElementById("question");
				var button = document.getElementById("button");
				var options = document.getElementById("options");
				
				var node = nodes[n];
				
				question.innerHTML = node.question;
				button.innerHTML = '';
				if(node.button) {
					button.innerHTML = '<button onclick="toggleImage();">' + node.button.text +'</button>';
					button.innerHTML += '<img class="image" src="' + node.button.content.image + '">'
				}
				
				options.innerHTML = '';
				if(node.options) {
					for(let i=0; i<node.options.length; i++) {
						options.innerHTML += '<button onclick="displayNode(' + node.options[i].next + ')">' + node.options[i].text + '</button>';
					}
				}
			}

			function toggleImage() {
				var image = document.getElementsByClassName("image")[0];
				if(image.style.display !== "none")
					image.style.display = "none";
				else
					image.style.display = "block";
			}

			var emergency = JSON.parse('{"nodes":[{"question":"Is the guest unresponsive?","options":[{"text":"Yes","next":2},{"text":"No","next":1}]},{"question":"Call 911 for serious injuries. What is the injury?","options":[{"text":"Suspected spinal injury","next":7},{"text":"Heart attack","next":8},{"text":"Stroke","next":9},{"text":"Allergic reaction","next":10},{"text":"Fainting","next":11},{"text":"Seizures","next":12},{"text":"Diabetic emergencies","next":13},{"text":"Asthma attack","next":14},{"text":"Poisoning","next":15},{"text":"Alcohol and other drug emergencies","next":16},{"text":"Bites and stings","next":17},{"text":"Heat emergencies","next":18},{"text":"Cold emergencies","next":19}]},{"question":"Activate Emergency Action Plan?","options":[{"text":"Yes","next":3},{"text":"No"}]},{"question":"Retrieve equipment, put on gloves, ready backgoard at extrication point and call 911. Extricate six feet away from the water. Conduct a pulse and breathing assessment for 10 seconds.","options":[{"text":"Yes pulse, no breathing","next":4},{"text":"No pulse, no breathing","next":5}]},{"question":"Conduct CPR with AED and supplemental oxygen.","button":{"text":"Show chart","content":{"image":"lifesupport.png"}},"options":[{"text":"Yes pulse, yes breathing","next":6}]},{"question":"Rescue breathing and supplemental oxygen","button":{"text":"Show chart","content":{"image":"lifesupport.png"}},"options":[{"text":"Yes pulse, yes breathing","next":6}]},{"question":"Recovery position, monitor for normal blood oxygen levels.","options":[{"text":"Return to start","next":0}]},{"question":"Ensure complete restriction of head movement and wait for 911","options":[{"text":"Return to start","next":0}]},{"question":"Summon EMS. Rest, comfortable position. Assist use of prescribed heart medicine. Use asprin if available and person has no allergic reactions.","options":[{"text":"Return to start","next":0}]},{"question":"Characterized by weakness or numbness on one side of body, problems speaking, dizziness, confusion, headache. Summon EMS and rest person in a comfortable position. If vomiting, roll into recovery position.","options":[{"text":"Return to start","next":0}]},{"question":"For mild reactions, use an antihistamine such as Benadryl. For serious reactions, call 911 and position guest comfortably and open loose or restrictive clothing.","options":[{"text":"Return to start","next":0}]},{"question":"Lie guest down, and summon EMS. Look for signs of spinal injuries if guest has fallen. Roll guest into recovery position if he/she vomits. Keep airway clear.","options":[{"text":"Return to start","next":0}]},{"question":"Protect guest from hazardous objects and cushion between the guest\'s head and floor. Summon EMS.","options":[{"text":"Return to start","next":0}]},{"question":"Have guest rest, and provide foods with sugars. Then, activate EMS if guest becomes unresponsive","options":[{"text":"Return to start","next":0}]},{"question":"Move guest into upright or slightly bent forward position. Assist guest in using medication or inhaler. Provide supplemental oxygen, and summon EMS.","options":[{"text":"Return to start","next":0}]},{"question":"Determine amount and type of poisoning. If guest is unresponsive, summon EMS. Otherwise, read material data safety sheets (MSDS) and call poison control at 1-800-222-1222","options":[{"text":"Return to start","next":0}]},{"question":"If guest is responsive, call poison control. If guest becomes violent, leave area and call 911. If guest is unresponsive, summon EMS and begin CPR.","options":[{"text":"Return to start","next":0}]},{"question":"Remove stinger as quickly as possible with edge of card or finger. If using tweezers than do not squeeze venom sac. Wash area and apply ice pack. Then, apply pain reliever. Summon EMS if condition deteriorates rapidly.","options":[{"text":"Return to start","next":0}]},{"question":"Have guest rest in shade in a cool location. Provide water or drink. Apply cool, wet towels. Summon EMS if condition deteriorates rapidly.","options":[{"text":"Return to start","next":0}]},{"question":"Move guest out of cold and replace wet clothing. Provide non-caffeinated, warm, and sugary beverages. Summon EMS if condition worsens.","options":[{"text":"Return to start","next":0}]}]}');
			var nodes = emergency.nodes;
		</script>
		
	</head>
	
	<body onload="init(); displayNode(0);">
		<div id="top-bar"><a href="index.html"><img src="logo.png"></a></div>
		<div class="main-content">
			<h1>EMERGENCY</h1>
			<div id="currentNode">
				<div id="question"></div>
				<div id="button"></div>
				<div id="options">
					<button onclick="displayNode(0);">Start</button>
				</div>
			</div>
		</div>
	</body>
</html>
